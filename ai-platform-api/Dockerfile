FROM python:3.9-slim

ARG GEMINI_API_KEY
ENV GEMINI_API_KEY=${GEMINI_API_KEY}
RUN echo GEMINI_API_KEY = ${GEMINI_API_KEY}

ARG GROQ_API_KEY
ENV GROQ_API_KEY=${GROQ_API_KEY}
RUN echo GROQ_API_KEY=${GROQ_API_KEY}

ARG SQLALCHEMY_DATABASE_URL
ENV SQLALCHEMY_DATABASE_URL=${SQLALCHEMY_DATABASE_URL}
RUN echo SQLALCHEMY_DATABASE_URL=${SQLALCHEMY_DATABASE_URL}

ENV HOME=/app
RUN mkdir ${HOME}
WORKDIR ${HOME}

COPY . ${HOME}/

RUN pip install --no-cache-dir -r ./requirements.txt

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]